@page
@model NERA_Presentation.Pages.RegisterModel
@{
    ViewData["Title"] = "Register - NERA";
}

<div class="create-page">
    <main class="container">
        <h1 class="page-title">Create Account</h1>
        <sl-card class="panel form-card form-shell large-centered-form larger-bg">
            <div class="accent-bar"></div>
            <form id="registerForm" class="form-grid" method="get" novalidate>
                <sl-input id="name" name="Name" label="Full Name" placeholder="Enter your full name" required autofocus class="full"></sl-input>

                <sl-input id="email" name="Email" type="email" label="Email" placeholder="Enter your email" required class="full"></sl-input>

                <div class="form-row">
                    <sl-input id="password" name="Password" type="password" label="Password" placeholder="Enter your password" required password-toggle class="half"></sl-input>
                    <sl-input id="confirmPassword" name="ConfirmPassword" type="password" label="Confirm Password" placeholder="Confirm your password" required password-toggle class="half"></sl-input>
                </div>

                <sl-select id="userType" name="Type" label="User Type" placeholder="Select user type" hoist required class="full">
                    <sl-option value="">— Select —</sl-option>
                    <sl-option value="Attendee">Attendee</sl-option>
                    <sl-option value="Organizer">Organizer</sl-option>
                    <sl-option value="Admin">Admin</sl-option>
                </sl-select>

                <div class="form-actions full">
                    <sl-button type="button" class="btn-gradient" onclick="window.location.href='/Index'">
                        <sl-icon slot="prefix" name="person-plus"></sl-icon>
                        Register
                    </sl-button>
                    <a href="/Index" style="text-decoration:none">
                        <sl-button type="button" class="btn-outline">Cancel</sl-button>
                    </a>
                </div>

                <div style="text-align: center; margin-top: 16px; color: var(--muted); font-size: 14px;" class="full">
                    Already have an account? <a href="/Login" style="color: var(--brand-1); text-decoration: none; font-weight: 600;">Login here</a>
                </div>
            </form>
        </sl-card>
    </main>

    <script>
        const password = document.getElementById('password');
        const confirmPassword = document.getElementById('confirmPassword');

        // UI-only password validation feedback
        function validatePasswords() {
            if (password.value && confirmPassword.value) {
                if (password.value !== confirmPassword.value) {
                    confirmPassword.setCustomValidity('Passwords do not match');
                } else {
                    confirmPassword.setCustomValidity('');
                }
            }
        }

        password.addEventListener('input', validatePasswords);
        confirmPassword.addEventListener('input', validatePasswords);
    </script>

    <style>
        .large-centered-form {
            max-width: 600px !important;
            min-width: 350px;
            margin: 48px auto !important;
            padding: 40px 36px !important;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .larger-bg {
            max-width: 650px !important;
            min-width: 400px;
            min-height: 580px;
            margin: 48px auto !important;
            padding: 56px 48px !important;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .form-grid .full {
            grid-column: 1 / -1;
        }

        .form-actions {
            justify-content: center;
            width: 100%;
        }

        /* User type dropdown background */
        sl-select#userType::part(menu) {
            background-color: white !important;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        sl-select#userType sl-option {
            background-color: white !important;
            color: #374151;
            padding: 0.5rem 0.75rem;
        }
        
        sl-select#userType sl-option:hover {
            background-color: #f3f4f6 !important;
            color: #1f2937;
        }
        
        sl-select#userType sl-option[selected] {
            background-color: #3b82f6 !important;
            color: white;
        }
    </style>
</div>

